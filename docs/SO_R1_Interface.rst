.. This work is licensed under a Creative Commons Attribution 4.0 International License.
.. http://creativecommons.org/licenses/by/4.0
.. Copyright 2017 Huawei Technologies Co., Ltd.

SO Amsterdam Interfaces
================

.. image:: images/SO_R1_1.png

Service Orchestrator in Amsterdam release uses interfaces from both the MSO seed code and as well as new interfaces between the new components of ONAP. 
The below documentation of the SO APIs and are reviewed in the architecture committee meeting on 22/08/2017.

See :download:`SO_API_v0.1.2.pdf`

The interface between UUI and SO for the E2E VoLTE service:

See :download:`UUI-SO_API_Specification_v0.1.docx`

The interface between Multi VIM and SO:

See :download:`SO_MultiCloud.xlsx`

SO APIs
============

UUI API
----------------
Create E2E service instance
++++++++++++++++++++++++++++

+--------------------+-------------------------------------+
|Interface Definition|Description                          |
+====================+=====================================+
|URI                 |{serverRoot}/e2eServiceInstances/v3  |
+--------------------+-------------------------------------+
|Operation Type      |POST                                 |
+--------------------+-------------------------------------+
|Content-Type        |multipart/form-data                  |
+--------------------+-------------------------------------+

Request Body:

+---------+---------+-----------+--------------------------+-----------------------------+
|Attribute|Qualifier|Cardinality|Content                   |Description                  |
+=========+=========+===========+==========================+=============================+
|service  |M        |1          |Service Object            |Content of service object.   |
+---------+---------+-----------+--------------------------+-----------------------------+

Service Object 

+----------------+------------------+-------------------------------------------------+
|Attribute       |Content           |Description                                      |
+================+==================+=================================================+
|name            |String            |Service instance name.                           |
+----------------+------------------+-------------------------------------------------+
|description     |String            |Service instance description                     |
+----------------+------------------+-------------------------------------------------+
|serviceDef ID   |String            |The service invariantUUID. It is defined in SDC. |
+----------------+------------------+-------------------------------------------------+
|templateId      |String            |The service Template UUID. It is defined in SDC. |
+----------------+------------------+-------------------------------------------------+
|parameters      |Parameter Object  |Parameter Object                                 |
+----------------+------------------+-------------------------------------------------+

Parameter Object

+----------------------+------------------+-----------------------------------------------------+
|Attribute             |Content           |Description                                          |
+======================+==================+=====================================================+
|globalSubscriberId    |String            |The subscriber id. It is defined in AAI              |
+----------------------+------------------+-----------------------------------------------------+
|subscriberName        |String            |The subscriber name. It is defined in AAI            |
+----------------------+------------------+-----------------------------------------------------+
|serviceType           |String            |The service type. It is defined in AAI               |
+----------------------+------------------+-----------------------------------------------------+
|templateName          |String            |The service Template name                            |
+----------------------+------------------+-----------------------------------------------------+
|resources             |Parameter Object  |This field manages parameters of resources           |
+----------------------+------------------+-----------------------------------------------------+
|resourceName          |String            |The resource name                                    |
+----------------------+------------------+-----------------------------------------------------+
|resouceDefId          |String            |The resource invariantUUID. It is defined in SDC.    |
+----------------------+------------------+-----------------------------------------------------+
|resourceId            |String            |The resource UUID. It is defined in SDC.             |
+----------------------+------------------+-----------------------------------------------------+
|nsParameters          |String            |Parameters for current resource object.              |
+----------------------+------------------+-----------------------------------------------------+
|locationConstraints   |String            |The DC location info for each VNF of current service |
+----------------------+------------------+-----------------------------------------------------+
|vnfProfileId          |String            |VNFD id                                              |
+----------------------+------------------+-----------------------------------------------------+
|additionalParamForNs  |String            |The parameter for current resource                   |
+----------------------+------------------+-----------------------------------------------------+


Response:

+-------------+---------+-----------+-------+------------------------------------------------------------------------+
|Attribute    |Qualifier|Cardinality|Content|Description                                                             |
+-------------+---------+-----------+-------+------------------------------------------------------------------------+
|serviceId    |M        |1          |String |Service instance ID.                                                    |
+-------------+---------+-----------+-------+------------------------------------------------------------------------+
|operationId  |M        |1          |String |Service Operation ID.                                                   |
+-------------+---------+-----------+-------+------------------------------------------------------------------------+

Delete E2E service instance
++++++++++++++++++++++++++++

+--------------------+-----------------------------------------------+
|Interface Definition|Description                                    |
+====================+===============================================+
|URI                 |{serverRoot}/e2eServiceInstances/v3/{serviceId}|
+--------------------+-----------------------------------------------+
|Operation Type      |DELETE                                         |
+--------------------+-----------------------------------------------+

Request Parameters:

+-------------------+---------+-----------+-------+----------------------------------------+
|Attribute          |Qualifier|Cardinality|Content|Description                             |
+===================+=========+===========+=======+========================================+
|globalSubscriberId |M        |1          |String |The subscriber id. It is defined in AAI |
+-------------------+---------+-----------+-------+----------------------------------------+
|serviceType        |M        |1          |String |The service type. It is defined in AAI  |
+-------------------+---------+-----------+-------+----------------------------------------+

Response:

+-------------+---------+-----------+-------+------------------------------------------------------------------------+
|Attribute    |Qualifier|Cardinality|Content|Description                                                             |
+-------------+---------+-----------+-------+------------------------------------------------------------------------+
|operationId  |M        |1          |String |The operation id.                                                       |
+-------------+---------+-----------+-------+------------------------------------------------------------------------+

Query E2E service operation result
++++++++++++++++++++++++++

+--------------------+------------------------------------------------------------------------+
|Interface Definition|Description                                                             |
+====================+========================================================================+
|URI                 |{serverRoot}/e2eServiceInstances/v3/{serviceId}/operations/{operationId}|
+--------------------+------------------------------------------------------------------------+
|Operation Type      |GET                                                                     |
+--------------------+------------------------------------------------------------------------+

Request Parameters:

+--------------+---------+-----------+-------+--------------+
|Attribute     |Qualifier|Cardinality|Content|Description   |
+==============+=========+===========+=======+==============+
|serviceId     |M        |1          |Service instance ID.  |
+--------------+---------+-----------+-------+--------------+
|operationId   |M        |1          |Service Operation ID. |
+--------------+---------+-----------+-------+--------------+

Response:

+------------------+---------+-----------+-------+------------------------------------------------------------------------+
|Attribute         |Qualifier|Cardinality|Content|Description                                                             |
+------------------+---------+-----------+-------+------------------------------------------------------------------------+
|operation         |M        |1          |String |Operation object identify.                                              |
+------------------+---------+-----------+-------+------------------------------------------------------------------------+
|operationId       |M        |1          |String |Operation ID.                                                           |
+------------------+---------+-----------+-------+------------------------------------------------------------------------+
|operation         |M        |1          |String |Operation type, create|delete.                                          |
+------------------+---------+-----------+-------+------------------------------------------------------------------------+
|result            |M        |1          |String |Operation result: finished, error, processing.                          |
+------------------+---------+-----------+-------+------------------------------------------------------------------------+
|reason            |M        |1          |String |If failing, need to write fail reason.                                  |
+------------------+---------+-----------+-------+------------------------------------------------------------------------+
|userId            |M        |1          |String |Operation user ID.                                                      |
+------------------+---------+-----------+-------+------------------------------------------------------------------------+
|operationContent  |M        |1          |String |The status detail of current operation which is being executing.        |
+------------------+---------+-----------+-------+------------------------------------------------------------------------+
|progress          |M        |1          |String |Current operation progress.                                             |
+------------------+---------+-----------+-------+------------------------------------------------------------------------+
|operateAt         |M        |1          |String |Time that it starts to execute operation.                               |
+------------------+---------+-----------+-------+------------------------------------------------------------------------+
|finishedAt        |M        |1          |String |Time that it finished executing operation.                              |
+------------------+---------+-----------+-------+------------------------------------------------------------------------+

AAI API
----------------

create or update an existing service-instance
+++++++++++++++++++++++++++++++++++++++++++++

+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|Interface Definition|Description                                                                                                                                                         |
+====================+====================================================================================================================================================================+
|URI                 |/business/customers/customer/{global-customer-id}/service-subscriptions/service-subscription/{service-type}/service-instances/service-instance/{service-instance-id}|
+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|Operation Type      |PUT                                                                                                                                                                 |
+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters:

+-------------------+---------+-----------+-------+-----------------------+
|Attribute          |Qualifier|Cardinality|Content|Description            |
+===================+=========+===========+=======+=======================+
|global-customer-id |M        |1          |String |Global Customer ID     |
+-------------------+---------+-----------+-------+-----------------------+
|service-type       |M        |1          |String |Service Type           |
+-------------------+---------+-----------+-------+-----------------------+
|service-instance-id|M        |1          |String |Service Instance ID    |
+-------------------+---------+-----------+-------+-----------------------+

Response:

+---------+---------+-----------+-------+-------------------+
|Attribute|Qualifier|Cardinality|Content|Description        |
+---------+---------+-----------+-------+-------------------+
|HTTP code|M        |1          |Integer|HTTP response code |
+---------+---------+-----------+-------+-------------------+

delete an existing service-instance
+++++++++++++++++++++++++++++++++++

+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|Interface Definition|Description                                                                                                                                                         |
+====================+====================================================================================================================================================================+
|URI                 |/business/customers/customer/{global-customer-id}/service-subscriptions/service-subscription/{service-type}/service-instances/service-instance/{service-instance-id}|
+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|Operation Type      |DELETE                                                                                                                                                              |
+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters:

+-------------------+---------+-----------+-------+-----------------------+
|Attribute          |Qualifier|Cardinality|Content|Description            |
+===================+=========+===========+=======+=======================+
|global-customer-id |M        |1          |String |Global Customer ID     |
+-------------------+---------+-----------+-------+-----------------------+
|service-type       |M        |1          |String |Service Type           |
+-------------------+---------+-----------+-------+-----------------------+
|service-instance-id|M        |1          |String |Service Instance ID    |
+-------------------+---------+-----------+-------+-----------------------+

Response:

+---------+---------+-----------+-------+-------------------+
|Attribute|Qualifier|Cardinality|Content|Description        |
+---------+---------+-----------+-------+-------------------+
|HTTP code|M        |1          |Integer|HTTP response code |
+---------+---------+-----------+-------+-------------------+

get service-instances
+++++++++++++++++++++

+--------------------+-----------------------------------------------------------------------------------------------------------------------------+
|Interface Definition|Description                                                                                                                  |
+====================+=============================================================================================================================+
|URI                 |/business/customers/customer/{global-customer-id}/service-subscriptions/service-subscription/{service-type}/service-instances|
+--------------------+-----------------------------------------------------------------------------------------------------------------------------+
|Operation Type      |GET                                                                                                                          |
+--------------------+-----------------------------------------------------------------------------------------------------------------------------+

Request Parameters:

+-------------------+---------+-----------+-------+-----------------------+
|Attribute          |Qualifier|Cardinality|Content|Description            |
+===================+=========+===========+=======+=======================+
|global-customer-id |M        |1          |String |Global Customer ID     |
+-------------------+---------+-----------+-------+-----------------------+
|service-type       |M        |1          |String |Service Type           |
+-------------------+---------+-----------+-------+-----------------------+

Response:

+-----------------+---------+-----------+----------------+-------------------+
|Attribute        |Qualifier|Cardinality|Content         |Description        |
+-----------------+---------+-----------+----------------+-------------------+
|service-instances|M        |1          |ServiceInstances|Service Instances  |
+-----------------+---------+-----------+----------------+-------------------+

get service-instance
++++++++++++++++++++

+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|Interface Definition|Description                                                                                                                                                         |
+====================+====================================================================================================================================================================+
|URI                 |/business/customers/customer/{global-customer-id}/service-subscriptions/service-subscription/{service-type}/service-instances/service-instance/{service-instance-id}|
+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|Operation Type      |GET                                                                                                                                                                 |
+--------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters:

+-------------------+---------+-----------+-------+-----------------------+
|Attribute          |Qualifier|Cardinality|Content|Description            |
+===================+=========+===========+=======+=======================+
|global-customer-id |M        |1          |String |Global Customer ID     |
+-------------------+---------+-----------+-------+-----------------------+
|service-type       |M        |1          |String |Service Type           |
+-------------------+---------+-----------+-------+-----------------------+
|service-instance-id|M        |1          |String |Service instance ID    |
+-------------------+---------+-----------+-------+-----------------------+

Response:

+-----------------+---------+-----------+----------------+-------------------+
|Attribute        |Qualifier|Cardinality|Content         |Description        |
+-----------------+---------+-----------+----------------+-------------------+
|service-instance |M        |1          |ServiceInstance |Service Instance   |
+-----------------+---------+-----------+----------------+-------------------+

see node definition for valid relationships
+++++++++++++++++++++++++++++++++++++++++++

+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|Interface Definition|Description                                                                                                                                                                                        |
+====================+===================================================================================================================================================================================================+
|URI                 |/business/customers/customer/{global-customer-id}/service-subscriptions/service-subscription/{service-type}/service-instances/service-instance/{service-instance-id}/relationship-list/relationship|
+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|Operation Type      |PUT                                                                                                                                                                                                |
+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters:

+-------------------+---------+-----------+-------+-----------------------+
|Attribute          |Qualifier|Cardinality|Content|Description            |
+===================+=========+===========+=======+=======================+
|global-customer-id |M        |1          |String |Global Customer ID     |
+-------------------+---------+-----------+-------+-----------------------+
|service-type       |M        |1          |String |Service Type           |
+-------------------+---------+-----------+-------+-----------------------+
|service-instance-id|M        |1          |String |Service instance ID    |
+-------------------+---------+-----------+-------+-----------------------+

Response:

+---------+---------+-----------+-------+-------------------+
|Attribute|Qualifier|Cardinality|Content|Description        |
+---------+---------+-----------+-------+-------------------+
|HTTP code|M        |1          |Integer|HTTP response code |
+---------+---------+-----------+-------+-------------------+

delete an existing relationship
+++++++++++++++++++++++++++++++

+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|Interface Definition|Description                                                                                                                                                                                        |
+====================+===================================================================================================================================================================================================+
|URI                 |/business/customers/customer/{global-customer-id}/service-subscriptions/service-subscription/{service-type}/service-instances/service-instance/{service-instance-id}/relationship-list/relationship|
+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|Operation Type      |DELETE                                                                                                                                                                                             |
+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters:

+-------------------+---------+-----------+-------+-----------------------+
|Attribute          |Qualifier|Cardinality|Content|Description            |
+===================+=========+===========+=======+=======================+
|global-customer-id |M        |1          |String |Global Customer ID     |
+-------------------+---------+-----------+-------+-----------------------+
|service-type       |M        |1          |String |Service Type           |
+-------------------+---------+-----------+-------+-----------------------+
|service-instance-id|M        |1          |String |Service instance ID    |
+-------------------+---------+-----------+-------+-----------------------+

Response:

+---------+---------+-----------+-------+-------------------+
|Attribute|Qualifier|Cardinality|Content|Description        |
+---------+---------+-----------+-------+-------------------+
|HTTP code|M        |1          |Integer|HTTP response code |
+---------+---------+-----------+-------+-------------------+